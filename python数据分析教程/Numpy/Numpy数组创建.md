# Numpy数组创建

1. **创建数组的方法**：

   1. 从其他Python结构转换（例如:列表，元组）
   2. 内在的numpy数组创建对象（例如，arange，ones，zeros等）
   3. 通过使用字符串或缓冲区从原始字节创建数组
   4. 使用特殊库函数（例如，随机）

2. **将Python array_like对象转换为Numpy数组**

   Python中以类数组结构排列的数字数据可以通过使用`array()`函数转换为数组。最明显的例子是列表和元组。使用`array`(深拷贝),`asarray`（浅拷贝）方法。

   ```python
   # python列表创建数组
   a = [1,2,3]
   b = np.array(a)
   b ---> array([1,2,3])
   # python元组创建数组
   c = (1,2,3)
   d = np.array(c)
   d ---> array([1,2,3])
   ```

3. **内在的numpy数组创建**

   `np.ones(shape, dtype=None, order='C')`：创建一个填充了具有指定形状的1值的数组。默认的dtype是float64。

   ```python
   ones = np.ones((3,4))
   ones ---> array([[1., 1., 1., 1.],
          [1., 1., 1., 1.],
          [1., 1., 1., 1.]])
   默认dtype('float64')
   ```

   `np.zeros(shape, dtype=None, order='C')`:  创建一个填充了具有指定形状的0值的数组。默认的dtype是float64。

   ```python
   zeros = np.ones((3,4))
   ones ---> array([[0., 0., 0., 0.],
          [0., 0., 0., 0.],
          [0., 0., 0., 0.]])
   默认dtype('float64')
   ```

   `np.arange(start,stop,step,dtype)`:  创建具有定期递增值的数组。

   | 参数    | 描述                 |
   | ------- | -------------------- |
   | `start` | 起始值,默认为`0`     |
   | `stop`  | 终止值（不包含)      |
   | `step`  | 两值的间隔,默认为`1` |
   | `dtype` | 数据类型             |

   ```python
   arange = np.arange(10,20,2)
   arange  --->array([10, 12, 14, 16, 18])
   
   arange = np.arange(10,20,2,dtype=np.float64)
   arange  --->array([10., 12., 14., 16., 18.])
   ```

   `np.linspace(start, stop, num, endpoint, retstep, dtype)`:  创建具有指定数量元素的数组，并在指定的开始值和结束值之间平均间隔。

   | 参数       | 描述                                           |
   | ---------- | ---------------------------------------------- |
   | `start`    | 起始值                                         |
   | `stop`     | 终止值,如果`endpoint`为`True`,包含`stop`值     |
   | `num`      | 生成的等间隔样例数量,默认`50`                  |
   | `endpoint` | 是否包含`stop`值,默认`True`                    |
   | `retstep`  | 如果为`True`，返回样例，以及连续数字之间的步长 |
   | `dtype`    | 数据类型                                       |



   ```python
   li = np.linspace(2,20,8)
   li --->array([ 2.        ,  4.57142857,  7.14285714,  9.71428571, 12.28571429,
          14.85714286, 17.42857143, 20.        ])
   
   li = np.linspace(2,20,8,retstep=True)
   li --->(array([ 2.        ,  4.57142857,  7.14285714,  9.71428571, 12.28571429,
           14.85714286, 17.42857143, 20.        ]), 2.5714285714285716) # 包含样例
   ```

   `np.logspace(start, stop, num, endpoint, base, dtype)`:此函数返回一个`ndarray`对象，其中包含在对数刻度上均匀分布的数字。 刻度的开始和结束端点是某个底数的幂，通常为 10。



| 参数       | 描述                            |
| ---------- | ------------------------------- |
| `start`    | 起始值:`base ** start`          |
| `stop`     | 终止值:`base ** stop`           |
| `num`      | 生成的等间隔样例数量,默认`50`   |
| `endpoint` | 是否包含`stop`值,默认`True`     |
| `base`     | `base`对数空间的底数,默认为`10` |
| `dtype`    | 数据类型                        |

   ```python
   # 对数空间为10
   log_num = np.logspace(1,2,num=10)
   log_num --->array([ 10.        ,  12.91549665,  16.68100537,  21.5443469 ,
           27.82559402,  35.93813664,  46.41588834,  59.94842503,
           77.42636827, 100.        ])
   #对数空间为2
   log_num = np.logspace(1,2,num=10, base=2)
   log_num --->array([2.        , 2.16011948, 2.33305808, 2.5198421 , 2.72158   ,
          2.93946898, 3.1748021 , 3.42897593, 3.70349885, 4.        ])
   ```

4. **通过使用字符串或缓冲区从原始字节创建数组**

   `np.frombuffer(buffer, dtype = float, count = -1, offset = 0)`:此函数将缓冲区解释为一维数组。 暴露缓冲区接口的任何对象都用作参数来返回`ndarray`。

   | 参数     | 描述                                         |
   | -------- | -------------------------------------------- |
   | `buffer` | 任何暴露缓冲区借口的对象                     |
   | `dtype`  | 返回数组的数据类型，默认为`float`            |
   | `count`  | 需要读取的数据数量，默认为`-1`，读取所有数据 |
   | `offset` | `offset` 需要读取的起始位置，默认为`0`       |

   ```python
   s =  b'Hello World' 
   a = np.frombuffer(s, dtype =  'S1')  
   a --->array([b'H', b'e', b'l', b'l', b'o', b' ', b'W', b'o', b'r', b'l', b'd'],
         dtype='|S1')
   ```

   `np.fromiter(iterable, dtype, count = -1)`:此函数从任何可迭代对象构建一个`ndarray`对象，返回一个新的一维数组。

   | 序号       | 参数及描述                                   |
   | ---------- | -------------------------------------------- |
   | `iterable` | 任何可迭代对象                               |
   | `dtype`    | 返回数组的数据类型                           |
   | `count`    | 需要读取的数据数量，默认为`-1`，读取所有数据 |

   ```python
   ls = range(5)
   it = iter(ls)
   x = np.fromiter(it, dtype='i1')
   x --->array([0, 1, 2, 3, 4], dtype=int8)
   ```

5. **使用特殊库函数（例如，随机random）**

   使用`np.random`创建随机数组。

   **均匀分布**

   ​	`np.random.rand(d0,d1,...,dn)`:根据给定的维度生成**[0, 1)**之间的随机数,**dn**每个维度, 若没有参数，则生成一个数.

   ```python
   np.random.rand() #随机生成一个数
   #0.5726008714564191
   np.random.rand(2) #随机生成一个一维数组
   #array([0.61949677, 0.06182977])
   np.random.rand(3,2)
   """array([[0.73937337, 0.34386129],
          [0.89393313, 0.09146219],
          [0.97990048, 0.49450004]])"""
   ```

   ​	`np.random.randint(low,high=None,size=None,dtype='l')`:生成取值区间为[low, high)的随机整数，若没有输入参数high则取值区间为[0, low), 

   low:最小值,

   high:最大值,

   size:数组维度大小，dtype:np.int

   ```python
   np.random.randint(3,size=3) #生成3个[0,3)之间的整数
   #array([2, 0, 1])
   np.random.randint(1,5) #size=None,生成一个[1,5)之间随机的一个整数
   # 4
   np.random.randint(1,5,size=(3,2)) #生成一个二维数组
   """array([[1, 3],
          [1, 2],
          [2, 4]])"""
   ```

   ​	**`np.random.uniform(low=0.0, high=1.0, size=None)`**	:生成取值区间为[low,high)	的浮点数,默认取值范围[0,1.0).

   low:最小值,float型,  

   high:最大值，float型,

   size:数组维度大小，int型或tuple，

   没有参数时，则生成一个数。

   ```python
   np.random.uniform() #随机生成一个0-1.0的随机数
   #0.1726402474971156
   np.random.uniform(size=(3,2)) #随机生成一个数据是0 - 1.0的二维数组
   """array([[0.72540688, 0.47681299],
          [0.90533783, 0.78988655],
          [0.47050509, 0.55306498]])"""
   np.random.uniform(-1,1,size=10) #随机生成一个-1 - 1 的10个数的一维数组
   """array([-0.42469769,  0.66898184,  0.12269022,  0.59821852, -0.47739708,
          -0.85804074,  0.2332269 , -0.18532177, -0.04431914,  0.25257431])"""
   ```

   **正态分布**

   ![](C:\Users\唐禹\Desktop\数据分析-唐禹\Numpy\正态分布.png)

   ​	`np.random.randn(d0,d1,....,dn)`:从标准正态分布中返回一个(d0*d1* …* dn)维样本值.**dn**每个维度, 若没有参数，则生成一个数

   ```python
   np.random.randn() #随机生成一个数
   #-0.6828353877094375
   np.random.randn(1) #随机生成一个一维数组
   #array([-0.27862247])
   np.random.randn(3,2) #随机二维数组的数组
   """array([[-1.22491603,  1.49204094],
          [-0.17640881, -0.81221251],
          [-0.66017166, -0.18555491]])"""
   
   ```

   ​	**`np.random.normal(loc=0.0, scale=1.0, size=None)`**:  从正态分布中返回样本值. 

    loc：float此概率分布的均值,对应着整个分布的中心centre.

    scale：float此概率分布的标准差,对应于分布的宽度，scale越大越矮胖，scale越小，越瘦高

   size：int or tuple 

    输出的shape，默认为None，只输出一个值

   ```python
   np.random.normal()#生成一个随机数，size=None
   #-0.11276293905334074
   np.random.normal(size=1)#生成一个一维数组
   #array([0.20337865])
   np.random.normal(1,3,size=(3,2))
   """array([[4.58915271, 3.11798389],
          [3.04339931, 1.13752776],
          [1.64524515, 2.19528162]])
   """
   ```

   ​	`np.random.standard_normal(size=None)`:返回一个指定形状的标准正态分布的数组

   ```python
   np.random.standard_normal()#生成一个随机数
   #-1.0320902045776343
   np.random.standard_normal((3,2))
   """array([[-0.32021508,  1.09101575],
          [ 0.79058298,  1.34311915],
          [ 0.80387764,  1.72679853]])"""
   ```

6. **知识点补充**

   1. **均匀分布**

      是概率统计中的重要分布之一。是对称概率分布，在相同长度间隔的分布概率是等可能的,均匀分布由两个参数`a`和`b`定义，它们是数轴上的`最小值`和`最大值`，通常缩写为**U（a，b）**。均匀分布在自然情况下极为罕见，而人工栽培的有一定株行距的植物群落即是均匀分布。

   2. **正态分布**

      正态分布是一种概率分布。正态分布是具有两个参数`μ`和`σ`的连续型随机变量的分布，第一参数`μ`是服从正态分布的随机变量的`均值`，第二个参数`σ`是此随机变量的`标准差`，所以正态分布记作**N(μ，σ )**。

       `μ`决定了正态分布的位置，与`μ`越近，被取到的概率就越大，反之越小。`σ`描述的是正态分布的离散程度。`σ`越大，数据分布越分散曲线越扁平；`σ`越小，数据分布越集中曲线越陡峭。![](C:\Users\唐禹\Desktop\数据分析-唐禹\正态分布公式.png)

      1. **标准差**

         在[概率](https://baike.baidu.com/item/%E6%A6%82%E7%8E%87)统计中最常使用作为[统计分布](https://baike.baidu.com/item/%E7%BB%9F%E8%AE%A1%E5%88%86%E5%B8%83)程度（statisticaldispersion）上的测量。标准差定义是总体各单位标准值与其平均数离差平方的算术平均数的[平方根](https://baike.baidu.com/item/%E5%B9%B3%E6%96%B9%E6%A0%B9/79171)。它反映组内个体间的离散程度。简单来说，标准差是一组数据[平均值](https://baike.baidu.com/item/%E5%B9%B3%E5%9D%87%E5%80%BC)分散程度的一种度量。一个较大的标准差，代表大部分数值和其平均值之间差异较大；一个较小的标准差，代表这些数值较接近平均值。

         ![](C:\Users\唐禹\Desktop\数据分析-唐禹\Numpy\标准差公式.jpg)

      2. **方差**

         在概率论和统计方差衡量随机变量或一组数据时离散程度的度量。概率论中方差用来度量随机变量和其数学期望（即均值）之间的偏离程度。统计中的方差（样本方差）是各个数据分别与其平均数之差的平方的和的平均数

         ![](C:\Users\唐禹\Desktop\数据分析-唐禹\Numpy\平均数公式.jpg)![](C:\Users\唐禹\Desktop\数据分析-唐禹\Numpy\方差公式.png)

7. **案例**

   随机生成5组不同日期产品的内径尺寸(mm),一组10个产品。

   数量:5*10=50

   随机生成产品内径尺寸，服从正态分布,均值25，方差0.2

   ```python
   insider_dimension = np.random.normal(25,0.2,size=(5,10))
   insider_dimension
   """array([[24.77932034, 25.09216143, 24.98151027, 25.25425569, 25.06858384,
           24.80284698, 25.36932156, 24.89354909, 24.97998914, 24.95034899],
          [25.36538522, 24.90967666, 24.89776366, 24.99716099, 25.19111566,
           24.95791022, 25.17159946, 24.88894164, 25.2616871 , 24.72602432],
          [24.8335387 , 24.94511824, 25.234648  , 25.02720878, 24.67977384,
           25.39512587, 24.83408903, 24.9939906 , 25.03388191, 25.2789348 ],
          [24.70520956, 24.95986831, 24.61549957, 24.90316804, 25.1648354 ,
           24.82632398, 25.03309053, 24.68034673, 25.27200361, 24.98097997],
          [25.29596002, 24.95591159, 25.38686463, 24.9376919 , 25.04607681,
           25.02220415, 24.99493607, 25.00036926, 25.11806958, 24.77333334]])
   """
   ```

